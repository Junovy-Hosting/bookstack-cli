#!/usr/bin/env node
const { existsSync } = require('fs');
const path = require('path');

const here = __dirname;
const distEntry = path.resolve(here, '../dist/bookstack-cli.js');

if (!existsSync(distEntry)) {
  console.error('Build not found. Please run "bun run build" first.');
  process.exit(1);
}

const mod = require(distEntry);
const program = mod.program || (mod.default && mod.default.program);
if (program && typeof program.parse === 'function') {
  program.parse(process.argv);
} else if (typeof mod === 'function') {
  mod();
} else {
  console.error('Failed to load CLI program from', distEntry);
  process.exit(1);
}
